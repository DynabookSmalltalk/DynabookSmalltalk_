(name 'Compression-GDK.56' message 'empty log message' id '4a6a8fba-7217-4555-a394-aba6cd1584d6' date '24 January 2021' time '6:54:27.968539 pm' author 'GDK' ancestors ((name 'Compression-dtl.55' message 'Instead of "Error: can''t find EOCD position", say "Error: ZipArchive cannot find EOCD position in <name of the file or stream>"' id '3a42cda4-740b-4ac0-9fe3-2033f5a3177b' date '28 September 2017' time '8:43:03.046216 pm' author 'dtl' ancestors ((name 'Compression-dtl.54' message 'In an archive file is too short, or more commonly if it is empty, identify its name in the error message. This is helpful in the case of a corrupt file in a package-cache, which may have been created due to some earlier system or network problem.' id '97cfd1cd-0c07-40a7-92e9-4ea35b82fd5e' date '28 September 2017' time '8:00:37.70922 am' author 'dtl' ancestors ((name 'Compression-nice.53' message 'Classify a few ''as yet unclassified'' methods' id 'e6d7cbdf-497f-42b3-8b4b-f18c1f62409f' date '26 April 2017' time '10:52:24.507244 pm' author 'nice' ancestors ((name 'Compression-nice.52' message 'Correct a bug that can cause ZlibPlugin to read past the zipCollection boundary in DeflateBlock.If the plugin is disabled, there will be a ''subscript is out of bounds: 65537'' in DeflateStream fallback code.ByteString(Object)>>error:ByteString(Object)>>errorSubscriptBounds:ByteString(Object)>>at:ByteString>>at:ByteString>>byteAt:GZipWriteStream(DeflateStream)>>updateHashAt:GZipWriteStream(DeflateStream)>>insertStringAt:GZipWriteStream(DeflateStream)>>deflateBlock:chainLength:goodMatch:GZipWriteStream(ZipWriteStream)>>deflateBlock:chainLength:goodMatch:GZipWriteStream(DeflateStream)>>deflateBlockGZipWriteStream(DeflateStream)>>next:putAll:startingAt:GZipWriteStream(DeflateStream)>>nextPutAll:ByteString(String)>>zippedThis bug is triggered by some input data, for example if you extract the snapshot.bin file from the zip archive the archive http://source.squeak.org/VMMaker/VMMaker.oscog-nice.794.mczWe need MinMatch bytes to insert the string following the best match.(confirmed by comment near the end of a C version http://git.savannah.gnu.org/cgit/gzip.git/tree/deflate.c)Since we pass lastIndex-1 to the primitive, and that the longest match can be up to MaxMatch, we are going to read the zipCollection up to:	lastIndex - 1 + MaxMatch - 1 + MinMatch - 1 (0 based)Thus we must have:	lastIndex - 1 + MaxMatch - 1 + MinMatch - 1 < writeLimitWe have MinMatch = 3, thus the simplification	lastIndex + MaxMatch < writeLimitThus the requirement:	lastIndex + MaxMatch + 1 <= writeLimit' id '470505e6-d35d-450a-9804-29b904c5853d' date '1 April 2017' time '12:30:20.191934 am' author 'nice' ancestors ((name 'Compression-ul.51' message 'SortedCollection Whack-a-mole' id 'af1ea6d3-5443-4264-bb31-509dcba32a1d' date '13 March 2017' time '4:02:56.707225 am' author 'ul' ancestors ((name 'Compression-tfel.50' message 'Merge translations from Squeakland Etoys' id '1b713e03-5ddd-8544-ac4b-52875fe03a27' date '30 August 2016' time '10:38:23.843946 am' author 'tfel' ancestors ((name 'Compression-tfel.49' message 'merge from Squeakland Etoys image' id '5a70e931-0a3d-0a4b-8a36-6a12e6ba8862' date '2 August 2016' time '9:58:09.947368 am' author 'tfel' ancestors ((name 'Compression-cmm.48' message 'Allow zipping of directories with thousands of files, without creating thousands of instances of simultaneously open FileStream''s in the image.' id '833287cb-44f0-42e8-9419-bd8cde39dd0a' date '1 September 2015' time '3:43:17.149 pm' author 'cmm' ancestors ((name 'Compression-dtl.47' message 'ZipDirectoryMember>>localFileName should use host file system semantics to test for file directory path, it should not assume that unix conventions apply.This hopefully fixes the problem identified by Tim Oesterreich on squeak-dev: [BUG] ERROR: File not in Directory: [...] while trying to create a SAR-archive on Windows' id '4694513c-b90e-4953-accc-31b7d6c09432' date '23 January 2015' time '7:31:41.423 pm' author 'dtl' ancestors ((name 'Compression-bf.46' message 'Restore timestamps lost in assignment conversion.' id 'd9f61764-05a9-4109-ae6c-4835e2d04a4a' date '8 December 2014' time '1:35:04.484 am' author 'bf' ancestors ((name 'Compression-nice.45' message 'Expunge RWBinaryOrTextStream insanity from two more methods.Let the comment of these methods tell the awfull truth about ZipArchiveMember: uncompressing is latin1-centric.' id '2284e804-4f32-4eaa-89cc-8d14562410b3' date '17 July 2014' time '11:09:44.908 pm' author 'nice' ancestors ((name 'Compression-nice.44' message 'Oops, I committed too fast.ByteArray>>asWideString is a trap, it answers a ByteString whenever size \\ 4 ~= 0.This version works better for WideString.' id 'd4db1361-814f-4c5b-85f6-25d24c27fdbc' date '17 July 2014' time '10:22:38.863 pm' author 'nice' ancestors ((name 'Compression-nice.43' message 'Base the String compression support #zipped and #unzipped on ByteArray.Note 1: surprisingly, compression now seems to work on WideString even if the zipped size is not a multiple of 4... This deserves more testing, but can''t be worse than previous behavior which was completely broken.Note 2: despite the double conversion, working on ByteArray is not slower according to a few naive bench (maybe due to predimensionning of the buffer).' id 'a211c5be-5c3b-4b74-a09e-65b3a76514f3' date '17 July 2014' time '10:08:21.557 pm' author 'nice' ancestors ((name 'Compression-nice.42' message 'Cosmetic refactoring:(aCollection anySatisfy: aBlock) not -> (aCollection noneSatisfy: aBloc)' id 'c9c66aed-c87d-4c7f-8518-fda5842f46c2' date '24 May 2014' time '11:24:05.218 pm' author 'nice' ancestors ((name 'Compression-eem.41' message 'Fix a bug in [Fast]InflateStream, thanks to Yoshiki Oshima:This can be a nitpick of the year, but there is a bug inInflateStream>>decompressBlock:with:There is a part that reads (toward the end):------------------------collection        replaceFrom: readLimit+1        to: readLimit + length + 1        with: collection        startingAt: readLimit - distance + 1.------------------------but here we want to replace "length" bytes in collection, as opposedto length + 1 bytes, so it has to say:------------------------collection        replaceFrom: readLimit+1        to: readLimit + length        with: collection        startingAt: readLimit - distance + 1.------------------------(So is the non-primitive version in FastInflateStream.)The reason it does not matter is that replaceFrom:to:with:startingAt:does not care about the source and destination being the same andoverlap between them.  Even when the above bug puts one extra bytes incollection temporarily, the extra byte will be wiped out in the nextiteration of the loop surrounding it.  However, if you try to portthis to a language that does the "right thing" when there is anoverlap, it manifests as a bug.-- YoshikiP.S.It was a "rare" delight to point out a bug in Andreas'' code^^; We missyou.' id '331a0bb5-cbf5-4a72-9b2b-f4a5ab92e6c2' date '6 May 2014' time '3:03:07.032 pm' author 'eem' ancestors ((name 'Compression-fbs.40' message 'This is a test, even though it''s not a unit test.' id '82b0d6e4-0239-1241-968c-461a785fb6a7' date '26 November 2013' time '9:49:54.171 pm' author 'fbs' ancestors ((name 'Compression-fbs.39' message 'SmalltalkImage current -> Smalltalk.' id '459e1805-f255-014f-bb59-15a81de9cc48' date '25 July 2013' time '8:22:39.969 am' author 'fbs' ancestors ((name 'Compression-fbs.38' message 'Move CompressedSourceStream to Compression, making Files (in conjunction with System-fbs.570) independent of Compression.' id '290267cb-781a-854e-a734-4367d109ca0f' date '18 July 2013' time '5:30:21.449 pm' author 'fbs' ancestors ((name 'Compression-fbs.37' message 'Recategorise extension methods into either -Archives or -Streams subcategories.' id '77da886a-a70a-d242-8442-826c9cd67dad' date '17 July 2013' time '8:50:07.538 am' author 'fbs' ancestors ((name 'Compression-fbs.36' message 'Make Compression augment Kernel, and thus break the cyclic Kernel <-> Compression dependency.' id '44283c36-3bbc-5444-bc84-35144b694d12' date '5 July 2013' time '9:59:01.646 pm' author 'fbs' ancestors ((name 'Compression-fbs.35' message 'Push service-y stuff out of low level code into packages closer to the UI.' id '1dc85a45-cd8a-1644-aded-fbcf28435e5d' date '28 June 2013' time '8:44:46.942 pm' author 'fbs' ancestors ((name 'Compression-fbs.34' message 'Pulling out Compression''s tests into a separate package means that Compression no longer depends on SUnit.' id '904fdc23-31b2-4273-940e-8c840cf1ee82' date '14 June 2013' time '6:58:58.471 pm' author 'fbs' ancestors ((name 'Compression-fbs.33' message 'Use UIManager >> #informUserDuring: in preference to Utilities class >> #informUserDuring:. The latter acts as a proxy in this case anyway, and Utilities is something that needs to be torn apart and proper homes found for its various parts.' id '864a0d90-bd84-4487-90ab-73ad42aa2872' date '5 June 2013' time '10:39:48.14 am' author 'fbs' ancestors ((name 'Compression-nice.32' message 'Add a utility #contentStreamFromEncoding: to decode some ZipArchiveMember with prescribed encoding (''latin1'', ''utf8'' etc...)' id 'bce2a55c-891e-4fee-bce4-d8a12461b792' date '2 June 2013' time '3:15:05.134 pm' author 'nice' ancestors ((name 'Compression-ul.31' message 'Allow reading zero bytes in InflateStream >> #next:into:startingAt: and InflateStream >> #readInto:startingAt:count:.' id '0fc814a0-b8d5-9847-b67b-ee8efcbbe6db' date '6 December 2011' time '12:23:31.156 pm' author 'ul' ancestors ((name 'Compression-nice.30' message 'Bugfix: startIndex would be ignored and an incorrect bytesCount could be copied when collection species differ in DeflateStream>>next:putAll:startingAt:' id '9a13d6e4-7dd0-48e3-a097-456788f53488' date '10 September 2011' time '2:00:10.516 pm' author 'nice' ancestors ((name 'Compression-ul.29' message 'Removed unnecessary blocks.' id 'cbbfcf21-2c4b-454f-88ce-d57b58abe41a' date '3 August 2011' time '1:43:44.835 am' author 'ul' ancestors ((name 'Compression-ul.28' message '- Use #displayProgressFrom:to:during: instead of #displayProgressAt:from:to:during:.' id '3403bc37-42ca-9e4f-800d-d3f5fdd78e87' date '17 June 2011' time '4:31:39.289 pm' author 'ul' ancestors ((name 'Compression-laza.27' message 'Fixing wrong cascade' id 'ff9c293a-4d09-9a41-a969-5f79e89213d3' date '27 November 2010' time '6:48:21.632 pm' author 'laza' ancestors ((name 'Compression-ar.26' message 'Close zip file before trying to delete directory in test. Windows will not allow deletion of directories with open files in it.' id 'e2cb4788-3034-3540-8dda-4db6b602ca6c' date '16 September 2010' time '8:17:17.914 pm' author 'ar' ancestors ((name 'Compression-cmm.25' message 'Don''t try to write content for ZipDirectoryMembers.' id '4fb9ddea-09b1-409a-b564-2b1aa0da0556' date '16 September 2010' time '7:06:39.84 pm' author 'cmm' ancestors ((name 'Compression-cmm.24' message 'Added test for zipping a directory with a file using relative names.' id '3b7451e6-57a1-4365-aa83-b1ad1b5f6996' date '16 September 2010' time '6:29:29.033 pm' author 'cmm' ancestors ((name 'Compression-ar.23' message 'Move #lastIndexOfPKSignature: from Collections to Compression.' id 'a7e61341-4f5f-994b-84d9-ae357e9542a9' date '6 September 2010' time '3:30:52.455 pm' author 'ar' ancestors ((name 'Compression-ar.22' message 'Restructurings to reduce package depencencies.' id '579fde37-ea30-f14a-9799-a08eb7eac29f' date '5 September 2010' time '10:53:14.026 am' author 'ar' ancestors ((name 'Compression-ar.21' message 'Break the dependency between the Collection and the Compression package.' id 'fa1a526b-c5a4-4b43-a077-c53bf02c65da' date '1 September 2010' time '11:32:08.32 pm' author 'ar' ancestors ((name 'Compression-ar.20' message 'Fix handling of leap years in ZipArchive timestamp handling. Provide test governing the change in behavior.' id '68bc3e00-b2a1-2e49-851e-e113a3b0824d' date '11 August 2010' time '8:45:56.13 pm' author 'ar' ancestors ((name 'Compression-ar.19' message 'Fix handling of empty members in ZipArchives which would produce zips considered corrupt by other tools (unzip -t).' id '85770924-100a-fc44-bbfa-1b7ab229e24c' date '10 August 2010' time '1:18:33.227 pm' author 'ar' ancestors ((name 'Compression-nice.18' message 'Replace some underscore _ assignments with :=' id 'c905b9a4-f954-4041-ac67-9e7373c56964' date '11 June 2010' time '9:57:04.522 pm' author 'nice' ancestors ((name 'Compression-ul.17' message '- added a missing primitive call (by Andreas)' id 'fcec8c9d-a1f0-4f44-b48c-fc1f213051a8' date '28 April 2010' time '11:20:40.424 am' author 'ul' ancestors ((name 'Compression-nice.16' message 'Generalize stream protocol #readInto:startingAt:count:It''s the same as #next:into:startingAt: but avoid a copy and rather answer number of elements read.' id '220aef1a-9452-46f3-95c0-38b57d9802aa' date '16 March 2010' time '11:18:13.123 pm' author 'nice' ancestors ((name 'Compression-nice.15' message 'Reverse the logic and avoid a copy:- let next:putAll:startingAt: do the real work- let nextPutAll: call next:putAll:startingAt:This costs an additional send in nextPutAll: but is much better.' id 'aa871a89-0903-c147-a7e8-6dec1ee2f506' date '16 March 2010' time '10:59:48.888 pm' author 'nice' ancestors ((name 'Compression-nice.14' message 'Use literal ByteArray' id 'a36e4b70-0cab-854f-b112-9ddbd9e117f0' date '18 January 2010' time '3:30:48.999 pm' author 'nice' ancestors ((name 'Compression-nice.13' message 'Cosmetic: move or remove a few temps inside closures' id '4fd23945-a942-4ad2-a409-3718c24d23aa' date '27 December 2009' time '8:48:25 am' author 'nice' ancestors ((name 'Compression-nice.12' message 'Cosmetic changes from pharo- temps local to block- use ifNil:' id 'b9ac9a27-ed19-4a28-9d18-0911f756a263' date '18 December 2009' time '9:07:50 am' author 'nice' ancestors ((name 'Compression-nice.11' message 'Make nextLine work in an InflateStream' id '8ca3fdc7-88b2-144d-b248-9762b16e55c3' date '14 December 2009' time '2:27:24 am' author 'nice' ancestors ((name 'Compression-ul.10' message '- replace sends of #ifNotNilDo: to #ifNotNil:, #ifNil:ifNotNilDo: to #ifNil:ifNotNil:, #ifNotNilDo:ifNil: to #ifNotNil:ifNil:' id '070e2365-df5f-514e-8d90-fa49c065cb01' date '12 December 2009' time '2:18:43 am' author 'ul' ancestors ((name 'Compression-edc.9' message 'To follow this seehttp://bugs.squeak.org/view.php?id= 4825' id '38c38a0c-707a-4e08-a8b5-b87f7c59977f' date '15 May 2007' time '8:06:08 am' author 'edc' ancestors ((name 'Compression-ar.8' message '- replace underscore assignment with colon-equals' id '3c075d58-b256-704c-9870-6998a0c8e9ce' date '5 April 2006' time '12:25:07 am' author 'ar' ancestors ((name 'Compression-ar.6' message '- Hedgehog-Homebase integration' id '016bd406-0640-e146-9ee0-d0cb2c334baa' date '7 March 2006' time '8:30:40 pm' author 'ar' ancestors ((name 'Compression-ar.5' message 'UIManager refactoring:- Replace PopUpMenu by UIManager default- Replace FillInTheBlank by UIManager default' id '083f93e8-8feb-d34d-981a-e5e4df99a811' date '6 March 2006' time '6:44:52 pm' author 'ar' ancestors ((name 'Compression-ar.3' message 'Initial version.' id '87e2af01-a5ac-0b47-a9c3-a46098b4b7e8' date '6 March 2006' time '4:51:56 pm' author 'ar' ancestors ((name 'Compression-dew.1' message 'Initial version from 3.8 partitioning.' id 'fd684c6c-ebd0-11d9-869f-000d93572e0e' date '3 July 2005' time '10:44:42 am' author 'dew' ancestors () stepChildren ())) stepChildren ())) stepChildren ())(name 'Compression-ar.4' message '- add two support methods for archive queries' id '648ba8e4-96a4-5844-be5f-134e295d6214' date '1 March 2006' time '11:22:29 pm' author 'ar' ancestors ((name 'Compression-CdG.3' message 'Integrated ToolBuilder-UI-Refactor-PopUpMenu-1.cs from Mantis #1828 ' id '6acce33c-30e1-6144-9a1a-5361d6ae5713' date '17 October 2005' time '8:00:12 pm' author 'CdG' ancestors ((name 'Compression-md.2' message 'Change Set:		HexFixesDate:			16 March 2005Author:			Boris Gaertnerwith changes set #6217 the method Integer>>hex was deprecated. This change set is an attempt to replace the remaining senders of hex with either storeStringHex or printStringHex' id 'b1181f80-f628-4340-81cb-a540e913b618' date '4 August 2005' time '11:40:51 pm' author 'md' ancestors ((id 'fd684c6c-ebd0-11d9-869f-000d93572e0e')) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())(name 'Compression-bf.1' message '* initial etoys 4.1 snapshot' id '93967c21-29d2-48e7-aa78-39f65ef09a8d' date '29 April 2010' time '2:17:35 pm' author 'bf' ancestors () stepChildren ())) stepChildren ())(name 'Compression-ul.49' message 'Don''t let #next:putAll:startingAt: roll back the receiver when the first argument is negative.' id 'a194073a-524e-4842-981e-cb4a433229e6' date '24 August 2016' time '9:23:23.899054 pm' author 'ul' ancestors ((id '833287cb-44f0-42e8-9419-bd8cde39dd0a')) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())